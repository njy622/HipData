{% extends "base.html" %}
{% block additional_head %}
<script>
    function search(){
        let field = document.getElementById('field').value;
        let query = document.getElementById('query').value;
        console.log("search()", field, query);
        location.href = '/user/chatlist?field=' + field + '&query=' + query;
    }    	
</script>
{% endblock %}
{% block subtitle %}
<table class="table table-sm table-borderless">
    <tr>
        <td style="width: 52%; text-align: left;">
            <h3><strong>{{uid}}님의 Chat 내용</strong></h3>						
        </td>
        <td style="width: 15%;">
            <select class="form-select" id="field">
                <option value="u_question" {{ 'selected' if field == 'u_question' else '' }}>질문</option>
                <option value="c_answer" {{ 'selected' if field == 'c_answer' else ''}}>답변</option>
                <option value="c_date" {{ 'selected' if field == 'c_date' else ''}}>일시</option>
            </select>
        </td>
        <td style="width: 25%;">
            <input class="form-control" placeholder="검색할 내용" id="query" value="{{query|replace('%', '')}}"
                    onkeyup="if(window.event.keyCode==13) search()">
        </td>
        <td style="width: 8%;">
            <button class="btn btn-outline-primary" onclick="search()">검색</button>
        </td>
    </tr>
</table>
{% endblock %}
{% block content %}
<div class='container d-flex align-items-start' >
    <table class="table table-striped">
        <tr>
            <th>질문</th>
            <th>답변</th>
            <th>일시</th>
        </tr>
        {% for chat in chat_list %}
            <tr>
                <td>{{chat[2]}}</td>
                <td>{{chat[3]}}</td>
                <td>{{chat[4]}}</td>
            </tr>
        {% endfor %}
    </table>
</div>
<div class="container d-flex justify-content-center">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item {{ 'disabled' if page == 1 else '' }}">
                <a class="page-link" href="?page=1&field={{field}}&query={{query}}" aria-label="First">
                    <span aria-hidden="true">처음</span>
                </a>
            </li>
            <li class="page-item {{ 'disabled' if page == 1 else '' }}">
                <a class="page-link" href="?page={{ page - 1 }}&field={{field}}&query={{query}}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% for c_page in pages %}
                <li class="page-item">
                    <a class="page-link {{ 'active' if page == c_page else '' }}"  href="?page={{ c_page }}&field={{field}}&query={{query}}" aria-label="Group Start">
                        <span>{{ c_page }}</span>
                    </a>
                </li>
            {% endfor %}
            <li class="page-item {{ 'disabled' if page == num_pages else '' }}">
                <a class="page-link" href="?page={{ page + 1 }}&field={{field}}&query={{query}}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            <li class="page-item {{ 'disabled' if page == num_pages else '' }}">
                <a class="page-link" href="?page={{ num_pages }}&field={{field}}&query={{query}}" aria-label="Last">
                    <span aria-hidden="true">마지막</span>
                </a>
            </li>
        </ul>
    </nav>
    <!-- End Pagination -->
</div>
{% endblock %}